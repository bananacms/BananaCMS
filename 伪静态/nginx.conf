# 香蕉CMS Nginx 伪静态配置
# 适用于宝塔面板，复制到站点伪静态配置中
# Powered by https://xpornkit.com

# Sitemap
location = /sitemap.xml {
    rewrite ^ /sitemap.php last;
}

# 禁止访问敏感目录
location ~ ^/(config|core|models|controllers|views|runtime)/ {
    deny all;
}

# 静态资源直接访问
location /static/ {
    try_files $uri =404;
}

location /upload/ {
    try_files $uri =404;
}

# 后台入口伪静态（支持去掉.php后缀）
# 例如: /admin -> /admin.php, /console -> /console.php
location ~ ^/([a-zA-Z0-9_-]+)$ {
    set $php_file $1.php;
    if (-f $document_root/$php_file) {
        rewrite ^ /$php_file last;
    }
}

# 前台伪静态
location / {
    try_files $uri $uri/ /index.php?s=$uri&$args;
}