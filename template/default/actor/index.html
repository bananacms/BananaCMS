<?php include VIEW_PATH . 'layouts/header.php'; ?>

<div class="mb-6">
    <h1 class="text-2xl font-bold">演员库</h1>
    <p class="text-gray-500 text-sm mt-1">共 <?= $total ?> 位演员</p>
</div>

<?php if (!empty($actorList)): ?>
<div class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 mb-8">
    <?php foreach ($actorList as $actor): ?>
    <a href="<?= xpk_page_url('actor_detail', ['id' => $actor['actor_id'], 'slug' => $actor['actor_en'] ?? '']) ?>" class="group text-center">
        <div class="relative">
            <?php if ($actor['actor_pic']): ?>
            <img src="<?= htmlspecialchars($actor['actor_pic']) ?>" alt="<?= htmlspecialchars($actor['actor_name']) ?>" class="w-full aspect-square object-cover rounded-full bg-gray-100">
            <?php else: ?>
            <div class="w-full aspect-square rounded-full bg-gradient-to-br from-red-400 to-orange-400 flex items-center justify-center text-white text-2xl font-bold">
                <?= mb_substr($actor['actor_name'], 0, 1) ?>
            </div>
            <?php endif; ?>
        </div>
        <h3 class="mt-2 text-sm truncate group-hover:text-red-600"><?= htmlspecialchars($actor['actor_name']) ?></h3>
    </a>
    <?php endforeach; ?>
</div>

<?php if ($totalPages > 1): ?>
<div class="flex justify-center items-center space-x-2">
    <?php if ($page > 1): ?><a href="<?= xpk_url('actor/page/' . ($page - 1)) ?>" class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200">上一页</a><?php endif; ?>
    <?php for ($i = max(1, $page - 2); $i <= min($totalPages, $page + 2); $i++): ?>
        <?php if ($i == $page): ?><span class="px-4 py-2 bg-red-600 text-white rounded"><?= $i ?></span>
        <?php else: ?><a href="<?= xpk_url('actor/page/' . $i) ?>" class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200"><?= $i ?></a><?php endif; ?>
    <?php endfor; ?>
    <?php if ($page < $totalPages): ?><a href="<?= xpk_url('actor/page/' . ($page + 1)) ?>" class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200">下一页</a><?php endif; ?>
</div>
<?php endif; ?>

<?php else: ?>
<div class="text-center py-12 text-gray-500">暂无演员</div>
<?php endif; ?>

{xpk:footer}
