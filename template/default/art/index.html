<?php include VIEW_PATH . 'layouts/header.php'; ?>

<div class="mb-6">
    <h1 class="text-2xl font-bold">资讯</h1>
</div>

<?php if (!empty($artList)): ?>
<div class="space-y-4 mb-8">
    <?php foreach ($artList as $art): ?>
    <a href="/art/detail/<?= $art['art_id'] ?>" class="flex gap-4 p-4 bg-white rounded-lg border hover:shadow-md transition group">
        <?php if ($art['art_pic']): ?>
        <img src="<?= htmlspecialchars($art['art_pic']) ?>" alt="" class="w-32 h-20 object-cover rounded flex-shrink-0">
        <?php endif; ?>
        <div class="flex-1 min-w-0">
            <h3 class="font-medium group-hover:text-red-600 line-clamp-2"><?= htmlspecialchars($art['art_name']) ?></h3>
            <p class="text-gray-400 text-sm mt-2"><?= date('Y-m-d', $art['art_time']) ?> · <?= $art['art_hits'] ?>次阅读</p>
        </div>
    </a>
    <?php endforeach; ?>
</div>

<?php if ($totalPages > 1): ?>
<div class="flex justify-center items-center space-x-2">
    <?php if ($page > 1): ?><a href="/art/page/<?= $page - 1 ?>" class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200">上一页</a><?php endif; ?>
    <?php for ($i = max(1, $page - 2); $i <= min($totalPages, $page + 2); $i++): ?>
        <?php if ($i == $page): ?><span class="px-4 py-2 bg-red-600 text-white rounded"><?= $i ?></span>
        <?php else: ?><a href="/art/page/<?= $i ?>" class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200"><?= $i ?></a><?php endif; ?>
    <?php endfor; ?>
    <?php if ($page < $totalPages): ?><a href="/art/page/<?= $page + 1 ?>" class="px-4 py-2 bg-gray-100 rounded hover:bg-gray-200">下一页</a><?php endif; ?>
</div>
<?php endif; ?>

<?php else: ?>
<div class="text-center py-12 text-gray-500">暂无文章</div>
<?php endif; ?>

{xpk:footer}
