# ğŸŒ BananaCMS æ¨¡æ¿å˜é‡æ–‡æ¡£

æœ¬æ–‡æ¡£åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ¨¡æ¿å˜é‡å’Œæ ‡ç­¾ï¼Œä¾›æ¨¡æ¿å¼€å‘è€…å‚è€ƒã€‚

## ç›®å½•

- [æ¨¡æ¿è¯­æ³•](#æ¨¡æ¿è¯­æ³•)
- [å…¨å±€å˜é‡](#å…¨å±€å˜é‡)
- [æ¨¡æ¿æ ‡ç­¾](#æ¨¡æ¿æ ‡ç­¾)
- [é¡µé¢å˜é‡](#é¡µé¢å˜é‡)
- [è¾…åŠ©å‡½æ•°](#è¾…åŠ©å‡½æ•°)

---

## æ¨¡æ¿è¯­æ³•

### å˜é‡è¾“å‡º

```html
<!-- ç®€å•å˜é‡ -->
{$å˜é‡å}

<!-- æ•°ç»„å˜é‡ -->
{$æ•°ç»„.é”®å}
```

### æ¡ä»¶åˆ¤æ–­

```html
{if $æ¡ä»¶}
    å†…å®¹
{elseif $å…¶ä»–æ¡ä»¶}
    å…¶ä»–å†…å®¹
{else}
    é»˜è®¤å†…å®¹
{/if}
```

### å¾ªç¯éå†

```html
{foreach $åˆ—è¡¨ as $item}
    {$item.å­—æ®µ}
{/foreach}

<!-- å¸¦ç´¢å¼• -->
{foreach $åˆ—è¡¨ as $key => $item}
    {$key}: {$item.å­—æ®µ}
{/foreach}
```

### æ¨¡æ¿åŒ…å«

```html
{include file="header"}
{include file="footer"}
```

---

## å…¨å±€å˜é‡

ä»¥ä¸‹å˜é‡åœ¨æ‰€æœ‰é¡µé¢ä¸­å¯ç”¨ï¼š

### ç«™ç‚¹ä¿¡æ¯

| å˜é‡ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| `{$siteName}` | ç«™ç‚¹åç§° | é¦™è•‰å½±è§† |
| `{$siteUrl}` | ç«™ç‚¹URL | https://example.com |
| `{$siteKeywords}` | ç«™ç‚¹å…³é”®è¯ | é¦™è•‰CMS,å…è´¹å½±è§† |
| `{$siteDescription}` | ç«™ç‚¹æè¿° | è½»é‡çº§å½±è§†CMS |
| `{$urlMode}` | URLæ¨¡å¼ | 4 |

### SEOå˜é‡

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$title}` | é¡µé¢æ ‡é¢˜ |
| `{$keywords}` | é¡µé¢å…³é”®è¯ |
| `{$description}` | é¡µé¢æè¿° |
| `{$noindex}` | æ˜¯å¦ç¦æ­¢æ”¶å½•ï¼ˆæœç´¢é¡µä¸ºtrueï¼‰ |

### å¯¼èˆªåˆ†ç±»

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$navTypes}` | å¯¼èˆªåˆ†ç±»åˆ—è¡¨ |

```html
{foreach $navTypes as $nav}
    <a href="/type/{$nav.type_id}">{$nav.type_name}</a>
{/foreach}
```

### ç”¨æˆ·ä¿¡æ¯

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$user}` | å½“å‰ç™»å½•ç”¨æˆ·ï¼ˆæœªç™»å½•ä¸ºnullï¼‰ |
| `{$user.user_id}` | ç”¨æˆ·ID |
| `{$user.user_name}` | ç”¨æˆ·å |
| `{$user.user_nick_name}` | æ˜µç§° |
| `{$user.user_pic}` | å¤´åƒ |
| `{$user.user_email}` | é‚®ç®± |

---

## æ¨¡æ¿æ ‡ç­¾

### è§†é¢‘åˆ—è¡¨ {xpk:vod}

```html
{xpk:vod num="10" order="time" type="1"}
    <div class="video-item">
        <a href="/vod/detail/{$vo.vod_id}">
            <img src="{$vo.vod_pic}" alt="{$vo.vod_name}">
            <h3>{$vo.vod_name}</h3>
            <span>{$vo.vod_remarks}</span>
        </a>
    </div>
{/xpk:vod}
```

**å±æ€§ï¼š**
| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `num` | æ˜¾ç¤ºæ•°é‡ | 10 |
| `order` | æ’åºæ–¹å¼ï¼štime/hits/score/up | time |
| `type` | åˆ†ç±»IDï¼ˆå¯é€‰ï¼‰ | å…¨éƒ¨ |

**å¾ªç¯å˜é‡ `$vo`ï¼š**
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `vod_id` | è§†é¢‘ID |
| `vod_name` | è§†é¢‘åç§° |
| `vod_sub` | å‰¯æ ‡é¢˜ |
| `vod_pic` | å°é¢å›¾ |
| `vod_pic_thumb` | ç¼©ç•¥å›¾ |
| `vod_actor` | æ¼”å‘˜ |
| `vod_director` | å¯¼æ¼” |
| `vod_writer` | ç¼–å‰§ |
| `vod_remarks` | å¤‡æ³¨ï¼ˆå¦‚ï¼šæ›´æ–°è‡³ç¬¬10é›†ï¼‰ |
| `vod_area` | åœ°åŒº |
| `vod_lang` | è¯­è¨€ |
| `vod_year` | å¹´ä»½ |
| `vod_type_id` | åˆ†ç±»ID |
| `vod_type_id_1` | ä¸€çº§åˆ†ç±»ID |
| `vod_content` | ç®€ä»‹ |
| `vod_hits` | ç‚¹å‡»é‡ |
| `vod_score` | è¯„åˆ† |
| `vod_score_num` | è¯„åˆ†äººæ•° |
| `vod_up` | é¡¶æ•° |
| `vod_down` | è¸©æ•° |
| `vod_time` | æ›´æ–°æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |
| `vod_time_add` | æ·»åŠ æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |
| `vod_letter` | é¦–å­—æ¯ |
| `vod_slug` | URLåˆ«å |
| `vod_isend` | æ˜¯å¦å®Œç»“ï¼ˆ1å®Œç»“/0è¿è½½ï¼‰ |
| `vod_play_from` | æ’­æ”¾æº |
| `vod_play_url` | æ’­æ”¾åœ°å€ |

### çƒ­é—¨è§†é¢‘ {xpk:hot}

```html
{xpk:hot num="10"}
    <a href="/vod/detail/{$vo.vod_id}">{$vo.vod_name}</a>
{/xpk:hot}
```

**å±æ€§ï¼š**
| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `num` | æ˜¾ç¤ºæ•°é‡ | 10 |

### åˆ†ç±»åˆ—è¡¨ {xpk:type}

```html
{xpk:type pid="0"}
    <a href="/type/{$vo.type_id}">{$vo.type_name}</a>
{/xpk:type}
```

**å±æ€§ï¼š**
| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `pid` | çˆ¶åˆ†ç±»IDï¼ˆ0ä¸ºé¡¶çº§ï¼‰ | 0 |

**å¾ªç¯å˜é‡ `$vo`ï¼š**
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `type_id` | åˆ†ç±»ID |
| `type_name` | åˆ†ç±»åç§° |
| `type_en` | è‹±æ–‡å/åˆ«å |
| `type_pid` | çˆ¶åˆ†ç±»ID |
| `type_sort` | æ’åº |
| `type_status` | çŠ¶æ€ |
| `type_des` | åˆ†ç±»æè¿° |
| `type_pic` | åˆ†ç±»å›¾ç‰‡ |

### æ¼”å‘˜åˆ—è¡¨ {xpk:actor}

```html
{xpk:actor num="20" order="hits"}
    <div class="actor-item">
        <img src="{$vo.actor_pic}" alt="{$vo.actor_name}">
        <span>{$vo.actor_name}</span>
    </div>
{/xpk:actor}
```

**å±æ€§ï¼š**
| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `num` | æ˜¾ç¤ºæ•°é‡ | 10 |
| `order` | æ’åºï¼šid/hits/time/name | id |

**å¾ªç¯å˜é‡ `$vo`ï¼š**
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `actor_id` | æ¼”å‘˜ID |
| `actor_name` | æ¼”å‘˜åç§° |
| `actor_pic` | æ¼”å‘˜ç…§ç‰‡ |
| `actor_content` | æ¼”å‘˜ç®€ä»‹ |
| `actor_hits` | ç‚¹å‡»é‡ |
| `actor_slug` | URLåˆ«å |

### æ–‡ç« åˆ—è¡¨ {xpk:art}

```html
{xpk:art num="10" order="time"}
    <a href="/art/detail/{$vo.art_id}">{$vo.art_title}</a>
{/xpk:art}
```

**å±æ€§ï¼š**
| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `num` | æ˜¾ç¤ºæ•°é‡ | 10 |
| `order` | æ’åºï¼štime/hits | time |

**å¾ªç¯å˜é‡ `$vo`ï¼š**
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `art_id` | æ–‡ç« ID |
| `art_title` | æ–‡ç« æ ‡é¢˜ |
| `art_pic` | æ–‡ç« å›¾ç‰‡ |
| `art_content` | æ–‡ç« å†…å®¹ |
| `art_hits` | ç‚¹å‡»é‡ |
| `art_time` | å‘å¸ƒæ—¶é—´ |
| `art_type_id` | åˆ†ç±»ID |
| `art_slug` | URLåˆ«å |

### å¹¿å‘Šæ ‡ç­¾ {xpk:ad}

```html
<!-- å•ä¸ªå¹¿å‘Š -->
{xpk:ad position="home_top"}

<!-- éšæœºæ˜¾ç¤ºä¸€ä¸ª -->
{xpk:ad position="sidebar" random="true"}

<!-- å¹¿å‘Šåˆ—è¡¨å¾ªç¯ -->
{xpk:adlist position="home_top"}
    <div class="ad-item">
        <a href="{$ad.ad_link}">
            <img src="{$ad.ad_image}" alt="{$ad.ad_title}">
        </a>
    </div>
{/xpk:adlist}
```

**å¹¿å‘Šä½ç½®ï¼š**
| ä½ç½®ä»£ç  | è¯´æ˜ |
|----------|------|
| `home_top` | é¦–é¡µé¡¶éƒ¨æ¨ªå¹… |
| `home_float` | å…¨ç«™æ‚¬æµ®å¹¿å‘Š |
| `detail_top` | è¯¦æƒ…é¡µé¡¶éƒ¨ |
| `detail_bottom` | è¯¦æƒ…é¡µåº•éƒ¨ |
| `play_pause` | æ’­æ”¾å™¨æš‚åœå¹¿å‘Š |
| `play_before` | ç‰‡å¤´å¹¿å‘Š |
| `sidebar` | ä¾§è¾¹æ å¹¿å‘Š |
| `list_insert` | åˆ—è¡¨é¡µæ’å…¥å¹¿å‘Š |
| `popup` | å…¨ç«™å¼¹çª—å¹¿å‘Š |
| `custom` | è‡ªå®šä¹‰ä½ç½® |

**å¹¿å‘Šå˜é‡ `$ad`ï¼š**
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `ad_id` | å¹¿å‘ŠID |
| `ad_title` | å¹¿å‘Šæ ‡é¢˜ |
| `ad_type` | ç±»å‹ï¼šimage/code/video/text |
| `ad_position` | å¹¿å‘Šä½ç½® |
| `ad_image` | å›¾ç‰‡åœ°å€ |
| `ad_link` | é“¾æ¥åœ°å€ |
| `ad_code` | å¹¿å‘Šä»£ç  |
| `ad_video` | è§†é¢‘åœ°å€ |

### è¯„åˆ†ç»„ä»¶ {xpk:score}

```html
{xpk:score type="vod" id="$vod.vod_id" size="large"}
```

**å±æ€§ï¼š**
| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `type` | ç±»å‹ï¼švod/art | vod |
| `id` | ç›®æ ‡ID | - |
| `size` | å°ºå¯¸ï¼šnormal/large | normal |

### é¡µè„šç‰ˆæƒ {xpk:footer}

```html
{xpk:footer}
```

è¾“å‡ºç‰ˆæƒä¿¡æ¯ï¼ˆå¿…é¡»ä¿ç•™ï¼‰ã€‚

---

## é¡µé¢å˜é‡

### é¦–é¡µ (index/index)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$slideList}` / `{$slides}` | è½®æ’­/æ¨èè§†é¢‘åˆ—è¡¨ |
| `{$newList}` / `{$recommendList}` | æœ€æ–°è§†é¢‘åˆ—è¡¨ |
| `{$hotList}` | çƒ­é—¨è§†é¢‘åˆ—è¡¨ |
| `{$typeVods}` | åˆ†ç±»åŠå…¶è§†é¢‘ï¼ˆå«typeå’Œvodsï¼‰ |
| `{$typeVideos}` | æŒ‰åˆ†ç±»IDæ˜ å°„çš„è§†é¢‘åˆ—è¡¨ |

```html
<!-- è½®æ’­å›¾ -->
{foreach $slideList as $slide}
    <img src="{$slide.vod_pic}" alt="{$slide.vod_name}">
{/foreach}

<!-- åˆ†ç±»è§†é¢‘ -->
{foreach $typeVods as $typeId => $item}
    <h2>{$item.type.type_name}</h2>
    {foreach $item.vods as $vod}
        {$vod.vod_name}
    {/foreach}
{/foreach}
```

### è§†é¢‘è¯¦æƒ…é¡µ (vod/detail)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$vod}` | è§†é¢‘è¯¦æƒ… |
| `{$vod.play_list}` | è§£æåçš„æ’­æ”¾åˆ—è¡¨ |
| `{$vod.down_list}` | è§£æåçš„ä¸‹è½½åˆ—è¡¨ |
| `{$playUrls}` / `{$playList}` | æ’­æ”¾æºåˆ—è¡¨ |
| `{$relatedList}` | ç›¸å…³è§†é¢‘åˆ—è¡¨ |

**è§†é¢‘è¯¦æƒ… `$vod`ï¼š**

åŒ…å«æ‰€æœ‰ `vod_*` å­—æ®µï¼Œå¦å¤–è¿˜æœ‰ï¼š
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `type_name` | åˆ†ç±»åç§° |
| `type_id` | åˆ†ç±»ID |
| `type_en` | åˆ†ç±»è‹±æ–‡å |
| `play_list` | æ’­æ”¾åˆ—è¡¨æ•°ç»„ |
| `down_list` | ä¸‹è½½åˆ—è¡¨æ•°ç»„ |

**æ’­æ”¾åˆ—è¡¨ç»“æ„ï¼š**
```php
[
    [
        'from' => 'æ’­æ”¾æºåç§°',
        'sid' => 1,  // æºåºå·
        'episodes' => [
            ['name' => 'ç¬¬1é›†', 'url' => 'æ’­æ”¾åœ°å€', 'nid' => 1],
            ['name' => 'ç¬¬2é›†', 'url' => 'æ’­æ”¾åœ°å€', 'nid' => 2],
        ],
        'count' => 2  // é›†æ•°
    ]
]
```

### è§†é¢‘æ’­æ”¾é¡µ (vod/play)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$vod}` | è§†é¢‘è¯¦æƒ… |
| `{$playUrls}` / `{$playList}` | æ’­æ”¾æºåˆ—è¡¨ |
| `{$playFroms}` | æ’­æ”¾æºåç§°æ•°ç»„ |
| `{$sid}` / `{$currentSid}` | å½“å‰æ’­æ”¾æºåºå· |
| `{$nid}` / `{$currentNid}` | å½“å‰é›†æ•°åºå· |
| `{$currentUrl}` / `{$playerUrl}` / `{$playUrl}` | æ’­æ”¾å™¨URL |
| `{$rawUrl}` | åŸå§‹æ’­æ”¾åœ°å€ |
| `{$currentFrom}` | å½“å‰æ’­æ”¾æºåç§° |
| `{$currentEp}` / `{$currentEpisode}` | å½“å‰é›†ä¿¡æ¯ |
| `{$currentSource}` | å½“å‰æ’­æ”¾æºä¿¡æ¯ |
| `{$prevEpisode}` | ä¸Šä¸€é›†ï¼ˆnullè¡¨ç¤ºæ— ï¼‰ |
| `{$nextEpisode}` | ä¸‹ä¸€é›†ï¼ˆnullè¡¨ç¤ºæ— ï¼‰ |
| `{$playerInfo}` | æ’­æ”¾å™¨é…ç½® |
| `{$useBuiltinPlayer}` | æ˜¯å¦ä½¿ç”¨å†…ç½®æ’­æ”¾å™¨ |
| `{$relatedList}` | ç›¸å…³è§†é¢‘åˆ—è¡¨ |

```html
<!-- æ’­æ”¾å™¨ -->
<iframe src="{$playerUrl}" allowfullscreen></iframe>

<!-- æ’­æ”¾æºåˆ‡æ¢ -->
{foreach $playUrls as $index => $source}
    <button class="{if $sid == $index + 1}active{/if}">
        {$source.name}
    </button>
{/foreach}

<!-- é›†æ•°åˆ—è¡¨ -->
{foreach $playUrls[$sid - 1].urls as $ep}
    <a href="/vod/play/{$vod.vod_id}/{$sid}/{$ep.nid}">{$ep.name}</a>
{/foreach}

<!-- ä¸Šä¸€é›†/ä¸‹ä¸€é›† -->
{if $prevEpisode}
    <a href="/vod/play/{$vod.vod_id}/{$sid}/{$prevEpisode.nid}">ä¸Šä¸€é›†</a>
{/if}
{if $nextEpisode}
    <a href="/vod/play/{$vod.vod_id}/{$sid}/{$nextEpisode.nid}">ä¸‹ä¸€é›†</a>
{/if}
```

### åˆ†ç±»é¡µ (type/index, vod/type)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$type}` | å½“å‰åˆ†ç±»ä¿¡æ¯ |
| `{$subTypes}` | å­åˆ†ç±»åˆ—è¡¨ |
| `{$vodList}` | è§†é¢‘åˆ—è¡¨ |
| `{$page}` | å½“å‰é¡µç  |
| `{$totalPages}` | æ€»é¡µæ•° |
| `{$total}` | æ€»æ•°é‡ |
| `{$baseUrl}` | åˆ†é¡µåŸºç¡€URL |

**åˆ†ç±»ä¿¡æ¯ `$type`ï¼š**
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `type_id` | åˆ†ç±»ID |
| `type_name` | åˆ†ç±»åç§° |
| `type_en` | è‹±æ–‡å |
| `type_pid` | çˆ¶åˆ†ç±»ID |
| `type_des` | åˆ†ç±»æè¿° |
| `parent_name` | çˆ¶åˆ†ç±»åç§°ï¼ˆå¦‚æœ‰ï¼‰ |
| `parent_en` | çˆ¶åˆ†ç±»è‹±æ–‡åï¼ˆå¦‚æœ‰ï¼‰ |

### å…¨éƒ¨åˆ†ç±»é¡µ (type/all)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$typeList}` / `{$types}` | åˆ†ç±»åˆ—è¡¨ |

### æ¼”å‘˜åˆ—è¡¨é¡µ (actor/index)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$actorList}` | æ¼”å‘˜åˆ—è¡¨ |
| `{$page}` | å½“å‰é¡µç  |
| `{$totalPages}` | æ€»é¡µæ•° |
| `{$total}` | æ€»æ•°é‡ |

### æ¼”å‘˜è¯¦æƒ…é¡µ (actor/detail)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$actor}` | æ¼”å‘˜è¯¦æƒ… |
| `{$vodList}` | è¯¥æ¼”å‘˜çš„è§†é¢‘åˆ—è¡¨ |

**æ¼”å‘˜è¯¦æƒ… `$actor`ï¼š**
| å­—æ®µ | è¯´æ˜ |
|------|------|
| `actor_id` | æ¼”å‘˜ID |
| `actor_name` | æ¼”å‘˜åç§° |
| `actor_pic` | æ¼”å‘˜ç…§ç‰‡ |
| `actor_content` | æ¼”å‘˜ç®€ä»‹ |
| `actor_hits` | ç‚¹å‡»é‡ |
| `actor_slug` | URLåˆ«å |
| `actor_time` | æ›´æ–°æ—¶é—´ |

### æœç´¢é¡µ (search/index)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$vodList}` | æœç´¢ç»“æœåˆ—è¡¨ |
| `{$keyword}` | æœç´¢å…³é”®è¯ |
| `{$total}` | ç»“æœæ€»æ•° |
| `{$page}` | å½“å‰é¡µç  |
| `{$totalPages}` | æ€»é¡µæ•° |
| `{$baseUrl}` | åˆ†é¡µåŸºç¡€URL |
| `{$hotKeywords}` | çƒ­é—¨æœç´¢è¯ |
| `{$recentKeywords}` | æœ€è¿‘æœç´¢è¯ |
| `{$pageTitle}` | é¡µé¢æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ |

```html
<!-- çƒ­é—¨æœç´¢ -->
{foreach $hotKeywords as $kw}
    <a href="/search/{$kw.keyword}">{$kw.keyword}</a>
{/foreach}
```

### ç”¨æˆ·ç™»å½•é¡µ (user/login)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$csrfToken}` | CSRFä»¤ç‰Œ |
| `{$redirect}` | ç™»å½•åè·³è½¬åœ°å€ |

### ç”¨æˆ·æ³¨å†Œé¡µ (user/register)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$csrfToken}` | CSRFä»¤ç‰Œ |
| `{$redirect}` | æ³¨å†Œåè·³è½¬åœ°å€ |
| `{$registerClosed}` | æ˜¯å¦å…³é—­æ³¨å†Œ |

### ç”¨æˆ·ä¸­å¿ƒé¡µ (user/center)

| å˜é‡ | è¯´æ˜ |
|------|------|
| `{$tab}` | å½“å‰æ ‡ç­¾ï¼šfavorite/history/comment |
| `{$list}` | å½“å‰æ ‡ç­¾çš„æ•°æ®åˆ—è¡¨ |
| `{$page}` | å½“å‰é¡µç  |
| `{$totalPages}` | æ€»é¡µæ•° |
| `{$total}` | å½“å‰æ ‡ç­¾æ€»æ•° |
| `{$favCount}` | æ”¶è—æ€»æ•° |
| `{$historyCount}` | å†å²æ€»æ•° |
| `{$commentCount}` | è¯„è®ºæ€»æ•° |

---

## è¾…åŠ©å‡½æ•°

### PHPå‡½æ•°ï¼ˆæ¨¡æ¿ä¸­å¯ç”¨ï¼‰

```html
<!-- æ ¼å¼åŒ–æ•°å­— -->
<?php echo xpk_format_number($vod['vod_hits']); ?>
<!-- è¾“å‡ºï¼š1.2ä¸‡ -->

<!-- è·å–å¹¿å‘Š -->
<?php echo xpk_ad('home_top'); ?>

<!-- è·å–å¹¿å‘Šåˆ—è¡¨ -->
<?php $ads = xpk_ads('sidebar'); ?>
```

### JavaScriptå‡½æ•°

```javascript
// å¹¿å‘Šç‚¹å‡»ç»Ÿè®¡
xpkAdClick(adId);

// Cookieæ“ä½œï¼ˆå¹¿å‘Šå¼¹çª—ç”¨ï¼‰
xpkGetCookie(name);
xpkSetCookie(name, value, days);
```

---

## åˆ†é¡µç¤ºä¾‹

```html
{if $totalPages > 1}
<div class="pagination">
    {if $page > 1}
        <a href="{$baseUrl}/page/1">é¦–é¡µ</a>
        <a href="{$baseUrl}/page/{$page - 1}">ä¸Šä¸€é¡µ</a>
    {/if}
    
    <span>ç¬¬ {$page} / {$totalPages} é¡µ</span>
    
    {if $page < $totalPages}
        <a href="{$baseUrl}/page/{$page + 1}">ä¸‹ä¸€é¡µ</a>
        <a href="{$baseUrl}/page/{$totalPages}">æœ«é¡µ</a>
    {/if}
</div>
{/if}
```

---

## URLç”Ÿæˆ

### URLæ¨¡å¼

ç³»ç»Ÿæ”¯æŒ5ç§URLæ¨¡å¼ï¼š

| æ¨¡å¼ | è§†é¢‘è¯¦æƒ… | æ’­æ”¾é¡µ |
|------|----------|--------|
| 1 | `/vod/detail/123` | `/vod/play/123/1/1` |
| 2 | `/vod/123.html` | `/play/123-1-1.html` |
| 3 | è‡ªå®šä¹‰è§„åˆ™ | è‡ªå®šä¹‰è§„åˆ™ |
| 4 | `/video/movie-name` | `/play/movie-name/1/1` |
| 5 | `/video/movie-name.html` | `/play/movie-name-1-1.html` |

### å¸¸ç”¨URL

```html
<!-- é¦–é¡µ -->
/

<!-- è§†é¢‘è¯¦æƒ…ï¼ˆæ ¹æ®URLæ¨¡å¼ï¼‰ -->
/vod/detail/{$vod.vod_id}
/video/{$vod.vod_slug}

<!-- è§†é¢‘æ’­æ”¾ -->
/vod/play/{$vod.vod_id}/{$sid}/{$nid}

<!-- åˆ†ç±»é¡µ -->
/type/{$type.type_id}
/type/{$type.type_en}

<!-- æ¼”å‘˜é¡µ -->
/actor
/actor/detail/{$actor.actor_id}

<!-- æœç´¢ -->
/search/{$keyword}
/search?wd={$keyword}

<!-- ç”¨æˆ· -->
/user/login
/user/register
/user/center
/user/logout
```

---

## æ³¨æ„äº‹é¡¹

1. æ‰€æœ‰è¾“å‡ºå˜é‡å·²è‡ªåŠ¨è¿›è¡ŒHTMLè½¬ä¹‰ï¼Œé˜²æ­¢XSSæ”»å‡»
2. æ¨¡æ¿æ–‡ä»¶å¿…é¡»åŒ…å« `{xpk:footer}` æ ‡ç­¾
3. è¡¨å•æäº¤éœ€è¦åŒ…å« CSRF Tokenï¼š`<input type="hidden" name="_token" value="{$csrfToken}">`
4. æ—¶é—´æˆ³å­—æ®µéœ€è¦æ ¼å¼åŒ–ï¼š`<?php echo date('Y-m-d', $vod['vod_time']); ?>`
5. æ¨¡æ¿ç¼“å­˜åœ¨ `runtime/cache/` ç›®å½•ï¼Œå¼€å‘æ—¶å¯å¼€å¯ `APP_DEBUG` ç¦ç”¨ç¼“å­˜
